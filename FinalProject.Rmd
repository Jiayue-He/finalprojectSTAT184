---
title: "Final Project"
author: Jiayue He & Xuefei Wang
output: html_notebook
---

#Step 1:Download packages
```{r}
library(mosaic)
library(DataComputing)
library(tidyverse)
library(mosaicData)
library(dplyr)
library("rjson")
library(lubridate)
```


#Step 2:Importing and preparing data 
```{r}
Canada <- read.csv("CAvideos.csv")
US <- read.csv("USvideos.csv")
GreatBritain <- read.csv("GB.csv")
```

```{r}
CategoryID <- fromJSON(file = "CA_category_id.json")
list <- CategoryID[["items"]]
items <- length(list)
ids <- numeric(items)
for(i in seq_along(list)) {
  ids[i] <- CategoryID[["items"]][[i]][[3]]
}

names <- character(items)
for(i in seq_along(list)){
  names[i] <- CategoryID[["items"]][[i]][[4]][[2]]
}

names <- c('Film & Animation', 'Autos & Vehicles', 'Music', 'Pets & Animals', 'Sports', 
           'Short Movies', 'Travel & Events', 'Gaming', 'Videoblogging', 'People & Blogs', 
           'Comedy', 'Entertainment', 'News & Politics', 'Howto & Style', 'Education', 
           'Science & Technology', 'Nonprofits & Activism', 'Movies', 'Anime/Animation', 
           'Action/Adventure', 'Classics', 'Comedy2', 'Documentary', 'Drama', 'Family', 
           'Foreign', 'Horror', 'Sci-Fi/Fantasy', 'Thriller', 'Shorts', 'Shows')

Canada$categories <- factor(Canada$category_id, levels = ids, labels = names)
US$categories <- factor(US$category_id, levels = ids, labels = names)
GreatBritain$categories <- factor(GreatBritain$category_id, levels = ids, labels = names)
```


#Step 3:Look at the datatable by using summary functions
```{r}
head(Canada)
tail(US)
names(GreatBritain)
```


#Step 4:Data Wrangling 
```{r}
Canada <-
  Canada %>%
  select(title, publish_time, channel_title, categories, publish_time, tags, views, likes, dislikes, comment_count, thumbnail_link, description)

US <-
  US %>%
  select(title, publish_time, channel_title, categories, publish_time, tags, views, likes, dislikes, comment_count, thumbnail_link, description)

GreatBritain <-
  GreatBritain %>%
  select(title, publish_time, channel_title, categories, publish_time, tags, views, likes, dislikes, comment_count, thumbnail_link, description)
```

#Step 5: Clean Tables
```{r}
Canada <- #filter NA
  Canada %>%
  filter(categories != " ")

US <-
  US %>%
  filter(categories != " ")

GreatBritain <-
  GreatBritain %>%
  filter(categories != " ")
```

```{r}
Canada <-
  Canada %>%
  filter(grepl("^2017-11+", publish_time, ignore.case = TRUE))

US <-
  US %>% 
  filter(grepl("^2017-11+", publish_time, ignore.case = TRUE))

GreatBritain <-
  GreatBritain %>%
  filter(grepl("^2017-11+", publish_time, ignore.case = TRUE))
  
```



```{r}
View(Canada)
View(US)
View(GreatBritain)
```







